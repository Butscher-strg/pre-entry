<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verschl√ºsselte Seite</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    input {
      padding: 10px;
      font-size: 16px;
      width: 80%;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
    }
    #output {
      margin-top: 20px;
      word-wrap: break-word;
    }
  </style>
</head>
<body>
  <h2>üîê Gesch√ºtzter Zugriff</h2>
  <p>Gib das Passwort ein, um den geheimen Link zu entschl√ºsseln:</p>
  <input type="password" id="password" placeholder="Passwort" />
  <br />
  <button onclick="decrypt()">Entschl√ºsseln</button>
  <div id="output"></div>

  <script>
    function decrypt() {
      var password = document.getElementById("password").value;
      if (password.length < 8) {
        alert("Das Passwort muss mindestens 8 Zeichen lang sein.");
        return;
      }
      var key = CryptoJS.enc.Utf8.parse(password + "________");
      var iv = CryptoJS.enc.Base64.parse("CLu95KLf+MmEXAvHyw/pHA==");
      var encrypted = CryptoJS.enc.Base64.parse("r+FFrKG2nPuXx86PTfY8fjJw0ZGvQwrkCDbyDtXWP3+JSvsmxwoRb+o4COFAiMuyMJDnYBU73/Ug9x1Ae949leGzOllSBUKuFUpsvDEzVLo=");

      try {
        var decrypted = CryptoJS.AES.decrypt(
          { ciphertext: encrypted },
          key,
          {
            iv: iv,
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7,
          }
        );
        var result = decrypted.toString(CryptoJS.enc.Utf8);
        if (result) {
          document.getElementById("output").innerHTML =
            '<p>‚úÖ Entschl√ºsselt:</p><a href="' + result + '" target="_blank">' + result + '</a>';
        } else {
          throw "Ung√ºltiges Passwort";
        }
      } catch (e) {
        alert("‚ùå Entschl√ºsselung fehlgeschlagen. Falsches Passwort?");
      }
    }
  </script>
</body>
</html>
